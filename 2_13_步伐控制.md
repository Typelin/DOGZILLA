# 2_13_步伐控制與高度調整詳細指南

本文件重新核對了本地代碼，針對 DOGZILLA 的各項控制參數（極限值）進行了完整整理。

## 1. 源碼邏輯定位 (Local Code References)

根據對 `app_dogzilla.py` (V2.0.7) 的解析，核心參數的限制條件定義如下：

- **指令引用**: `from DOGZILLALib import DOGZILLA` (核心庫)
- **步伐與高度連動**: 第 **402 ~ 417** 行。
- **單一參數限制**:
    - **高度 (Height)**: 第 451, 453 行。
    - **步伐寬度 (Width/Speed)**: 第 396 ~ 399 行。
    - **肩膀角度 (Shoulder)**: 第 463 行。

---

## 2. 各項函數參數範圍 (Parameter Limits)

這裡記載了機器狗所有運動維度的 **「生理極限」**，請參考：

| 功能項目 | 函式範例 | 最小值 (Min) | 最大值 (Max) | 說明 |
| :--- | :--- | :---: | :---: | :--- |
| **身體高度** | `bot.translation('z', val)` | **75** | **110** | 低於 75 會鎖定，標準站姿為 108。 |
| **移動速度** | `bot.forward(val)` | **20** | **100** | 系統內部會將 Step 控制在 20-100 之間。 |
| **肩膀角度** | `bot.attitude('y', val)` | **-11** | **11** | 決定身體的側擺角度。 |
| **身體俯仰 (Pitch)** | `bot.attitude(['r','p'], [x, y])` | **-19** | **19** | 控制身體的前後傾斜 (Y 軸參數)。 |
| **身體翻滾 (Roll)** | `bot.attitude(['r','p'], [x, y])` | **-25** | **25** | 控制身體的左右翻轉 (X 軸參數)。 |

---

## 3. 步頻與高度的連動邏輯 (Logic Binding)

這是一個特殊的程式限制，會影響高度調試：

| 模式 (CMD 14) | 內部參數 (bot.pace) | 自動高度 | 手動高度調整 (CMD 22) |
| :--- | :--- | :--- | :--- |
| **1 (Slow)** | `"slow"` | **強制降至 75** | **完全禁用** |
| **2 (Normal)** | `"normal"` | 維持現狀 | 開放 (75 ~ 110) |
| **3 (High)** | `"high"` | 維持現狀 | 開放 (75 ~ 110) |

---

## 4. 實用控制範例

### 位移控制 (前進 30CM):
在「標準步頻 (`normal`)」、 「標準高度 (108)」 且 「速度 50」 下，前進 1 秒約 10 公分。
```python
bot.forward(50)
time.sleep(3.0) # 3秒 * 10cm/s = 30cm
bot.stop()
```

### 原地旋轉 (Rotate in Place):
```python
bot.turnright(80) # 向右旋轉
time.sleep(3.0)
bot.stop()

bot.turnleft(80)  # 向左旋轉
time.sleep(3.0)
bot.stop()
```

---

> [!TIP]
> 所有的引入必須確保 `sys.path` 包含 `/home/pi/DOGZILLA/app_dogzilla/`，否則會報找不到庫的錯誤。
