# DOGZILLA 機器狗系統運作與安全規範手冊

本手冊整理了 DOGZILLA 機器狗的軟體架構、開機流程、管理指令以及重要的電池安全規範。

---

## 一、 系統運作總流程

### 1. 動作控制與通訊中心 (The Brain)
這是機器狗與外部溝通並執行實體動作的核心。
* **檔案路徑**：`/home/pi/DOGZILLA/app_dogzilla/app_dogzilla.py`
* **核心功能**：
    * **TCP 伺服器**：在 Port 6000 監聽手機 APP 連線。
    * **Web 影像串流**：在 Port 6500 透過 Flask 提供即時攝像頭畫面。
    * **指令解析**：解析 `$cmd#` 格式的十六進位協議，控制 12 個舵機的協調動作。
* **啟動方式**：透過桌面環境啟動項 `~/.config/autostart/app.desktop` 自動開啟終端機執行。

### 2. OLED 狀態監視器 (The Eye)
負責機身螢幕顯示，提供即時系統資訊與安全警示。
* **檔案路徑**：`/home/pi/DOGZILLA/app_dogzilla/oled_dogzilla.py`
* **核心功能**：
    * **系統監視**：顯示 CPU 使用率、記憶體 (RAM) 與 SD 卡剩餘空間。
    * **連線確認**：顯示當前 IP 位址 (IPA)，方便使用者進行遠端連線。
    * **電量監控**：讀取電壓；當電壓低於 **9V** 時，會觸發機器狗趴下並顯示呼吸燈警示。
* **啟動方式**：註冊為 Systemd 系統服務 `yahboom_oled.service`。

### 3. 硬體驅動與安全保護 (The Nervous System)
管理底層硬體腳位，並內建自我保護機制。
* **關鍵程式庫**：`DOGZILLALib` (基於 I2C 協議與底層驅動板通訊)。
* **核心功能**：
    * **動作執行**：控制 12 個序列舵機的角度與速度。
    * **強制斷電保護**：當偵測到充電器插入時，系統會強制關閉電源輸出以確保充電安全。
* **啟動方式**：由 `app_dogzilla.py` 初始化時載入。

### 4. 網路與開發環境 (The Communication)
* **熱點機制**：開機優先嘗試連線已存 WiFi；若失敗則發送 `DOGZILLA_WIFI` 熱點訊號。
* **遠端工具**：自動啟動 `wayvnc` (遠端桌面) 與 `jupyter-lab` (網頁開發環境)。

---

## 二、 系統管理指令集

在進行個人開發或測試時，請使用以下指令管理行程：

| 目的 | 指令 |
| :--- | :--- |
| **停止背景監聽 (執行自訂腳本前)** | `sudo pkill -f app_dogzilla.py` |
| **停止 OLED 顯示服務** | `sudo systemctl stop yahboom_oled.service` |
| **檢查目前運行的 Python 行程** | `ps -ef \| grep -E "python3\|dogzilla"` |
| **重啟系統 (恢復官方預設狀態)** | `sudo reboot` |

---

## 三、 使用注意事項與電池安全

### 1. 登入資訊
* **用戶名/密碼**：`pi` / `yahboom`
* **VNC/Jupyter 密碼**：`yahboom`
* **出廠熱點密碼**：`12345678`

### 2. 電池與充電規範
* **低電壓保護**：當電池電量小於 **9V** 時，機器狗會自動趴下，電源開關燈呈現**呼吸燈效果**，此時必須及時充電。
* **強制關機**：插入充電器會強制關閉電源輸出，樹莓派會立即斷電，**請務必在充電前先存檔**。
* **充電指示**：充電時燈號亮**紅燈**，充滿亮**綠燈**。充電時請保持有人在場並關閉電源開關。
* **長期存放**：若長時間不使用，建議充電至 **80%** 左右並關閉開關，每隔一段時間檢查電量避免過放。

### 3. 操作限制
* **嚴禁載重**：機器狗載重能力有限，請勿增加重物。
* **環境限制**：請在 0°C 到 35°C 環境使用，並遠離火源與液體。
* **硬體改裝**：嚴禁私自修改電路板或刺破、短路電池。

---